<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’– My Best Person Ever ğŸ’–</title>
<style>
body {
  font-family: 'Comic Sans MS', cursive, sans-serif;
  background: url('background.jpg') no-repeat center center fixed;
  background-size: cover;
  text-align: center;
  padding: 40px;
  color: white;
  overflow-x: hidden;
}
h1 { font-size: 2.5em; text-shadow: 2px 2px 5px deeppink; }
.section {
  background: rgba(255,105,180,0.7);
  padding: 20px;
  border-radius: 20px;
  margin: 20px auto;
  max-width: 500px;
  position: relative;
}
button {
  background: hotpink;
  border: none;
  padding: 10px 20px;
  margin: 10px;
  border-radius: 10px;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
}
button:hover { box-shadow: 0 0 15px #ff69b4, 0 0 30px #ffb6c1; }
img { width: 250px; border-radius: 15px; border: 3px solid white; }
input { padding: 8px; border-radius: 8px; border: none; margin:5px; }
.message-card {
  background: rgba(255,255,255,0.2);
  padding: 10px;
  margin-top: 10px;
  border-radius: 10px;
  word-wrap: break-word;
}
.countdown { font-size:1.3em; margin-top:15px; color:#fff; text-shadow:1px 1px 3px darkred; }
/* Floating hearts */
.heart {
  position: fixed;
  width: 20px;
  height: 20px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 29.6"><path fill="deeppink" d="M23.6,0C20.4,0,16,3.5,16,3.5S11.6,0,8.4,0C3.8,0,0,3.8,0,8.4c0,5.2,5.3,10.4,13.4,17.3L16,29.6l2.6-3.9C26.7,18.8,32,13.6,32,8.4C32,3.8,28.2,0,23.6,0z"/></svg>') no-repeat center;
  background-size: contain;
  pointer-events: none;
  animation: floatUp linear infinite;
}
@keyframes floatUp {
  0% { transform: translateY(100vh) scale(0.5); opacity:0; }
  10% { opacity:1; }
  100% { transform: translateY(-10vh) scale(1); opacity:0; }
}
</style>
</head>
<body>

<h1>ğŸ’– My Best Person Ever ğŸ’–</h1>

<!-- PAGE 1: Password -->
<div class="section" id="page1">
  <h2>Enter Password to Continue ğŸ’Œ</h2>
  <input type="text" id="passwordInput" placeholder="Hint: My Birthday">
  <button id="passwordBtn">Submit ğŸ”‘</button>
</div>

<!-- PAGE 2: Favorite Photo + Countdown -->
<div class="section" id="page2" style="display:none;">
  <div class="countdown" id="photoCountdown"></div>
  <h2>Our Favorite Photo ğŸ¥°</h2>
  <img src="photo1.jpg" alt="Our Photo"><br>
  <button onclick="goToQuestions()">Next â¡ï¸</button>
  <button onclick="goBack(1)">Back â¬…ï¸</button>
</div>

<!-- PAGE 3: Questions + Upload -->
<div class="section" id="page3" style="display:none;">
  <h2>Answer This ğŸ’•</h2>
  <p>Do you love me? â¤ï¸</p>
  <input type="text" id="love"><br>
  <p>Most special moment with me? ğŸ¥°</p>
  <input type="text" id="moment"><br>

  <h3>Upload a Photo ğŸ“¸</h3>
  <input type="file" id="photoUpload" accept="image/*"><br>
  <h3>Record Voice Note ğŸ¤</h3>
  <button onclick="recordVoice()">Record / Stop</button>
  <audio id="audioPlayer" controls style="display:none;"></audio><br>

  <button onclick="submitData()">Submit ğŸ’Œ</button>
  <button onclick="goToSurprise()">Surprise ğŸ</button>
  <button onclick="goBack(2)">Back â¬…ï¸</button>
  <div id="messages"></div>
</div>

<!-- PAGE 4: Surprise + Heartfelt Message -->
<div class="section" id="page4" style="display:none;">
  <h2>ğŸ’– Surprise! ğŸ’–</h2>
  <img src="surprise.PNG" alt="Surprise Photo"><br><br>
  <p>
    I just want you to know that you are truly a special person ğŸŒŸ. 
    Thereâ€™s something about you thatâ€™s unlike anyone else Iâ€™ve ever met ğŸ’– â€” 
    your kindness, your smile ğŸ˜Š, the way you make people feel seen and valued ğŸŒˆ. 
    You hold a special place in my heart â¤ï¸, and I canâ€™t help but admire everything that makes you uniquely you âœ¨. 
    The world feels brighter just because youâ€™re in it â˜€ï¸, and I hope you never forget how important and amazing you are ğŸŒ¹ğŸ’«.
  </p>
  <button onclick="goBack(3)">Back â¬…ï¸</button>
</div>

<script>
// Password Lock
document.getElementById("passwordBtn").addEventListener("click", ()=>{
  const val = document.getElementById("passwordInput").value;
  if(val === "14122005"){
    startCountdown();
  } else { alert("âŒ Wrong password! Hint: My Birthday"); }
});

// Countdown from now until August 21, 2024
function startCountdown(){
  document.getElementById("page1").style.display = "none";
  document.getElementById("page2").style.display = "block";
  const countdown = document.getElementById("photoCountdown");
  const targetDate = new Date("2024-08-21T00:00:00");
  setInterval(()=>{
    const now = new Date();
    let diff = targetDate - now;
    if(diff < 0) diff = 0;
    const days = Math.floor(diff/1000/60/60/24);
    const hours = Math.floor((diff/1000/60/60)%24);
    const minutes = Math.floor((diff/1000/60)%60);
    const seconds = Math.floor((diff/1000)%60);
    countdown.textContent = `Together for: ${days}d ${hours}h ${minutes}m ${seconds}s`;
  },1000);
}

// Navigation
function goToQuestions(){ document.getElementById("page2").style.display="none"; document.getElementById("page3").style.display="block"; }
function goToSurprise(){ document.getElementById("page3").style.display="none"; document.getElementById("page4").style.display="block"; }
function goBack(page){
  document.getElementById("page1").style.display="none";
  document.getElementById("page2").style.display="none";
  document.getElementById("page3").style.display="none";
  document.getElementById("page4").style.display="none";
  if(page===1) document.getElementById("page1").style.display="block";
  if(page===2) document.getElementById("page2").style.display="block";
  if(page===3) document.getElementById("page3").style.display="block";
}

// Voice Record
let recorder, audioBlob;
async function recordVoice(){
  if(!recorder){
    const stream = await navigator.mediaDevices.getUserMedia({audio:true});
    recorder = new MediaRecorder(stream);
    const chunks = [];
    recorder.ondataavailable = e => chunks.push(e.data);
    recorder.onstop = ()=>{
      audioBlob = new Blob(chunks, {type:'audio/ogg'});
      const player = document.getElementById("audioPlayer");
      player.src = URL.createObjectURL(audioBlob);
      player.style.display = "block";
    };
  }
  if(recorder.state === "recording") recorder.stop(); else recorder.start();
}

// Convert file to Base64
function fileToBase64(file){ return new Promise((resolve,reject)=>{
  const reader = new FileReader();
  reader.onload = ()=>resolve(reader.result);
  reader.onerror = error => reject(error);
  reader.readAsDataURL(file);
});}

// Submit Data to SheetDB
async function submitData(){
  const love = document.getElementById("love").value;
  const moment = document.getElementById("moment").value;
  const photoFile = document.getElementById("photoUpload").files[0];
  let photoBase64 = "";
  if(photoFile) photoBase64 = await fileToBase64(photoFile);
  let audioBase64 = "";
  if(audioBlob){
    audioBase64 = await new Promise(res=>{
      const reader = new FileReader();
      reader.onload = e=>res(e.target.result);
      reader.readAsDataURL(audioBlob);
    });
  }
  await fetch("https://sheetdb.io/api/v1/m1mdy2b4n7l6u",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({data:{timestamp:new Date().toLocaleString(),loveAnswer:love,moment:moment,photoBase64:photoBase64,audioBase64:audioBase64}})
  });
  alert("ğŸ’– Your answers and uploads are saved to Google Sheet!");
}
  
// Floating hearts
function createHeart(){
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.style.left = Math.random()*100+"vw";
  heart.style.animationDuration = 3+Math.random()*2+"s";
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),5000);
}
setInterval(createHeart,400);
</script>

</body>
</html>
